---
- name: Verify that required networks are defined
  ansible.builtin.assert:
    that: "libvirt_networks.{{ item }} is defined"
    fail_msg: "{{ item }} needs to be set as a network"
    success_msg: "Required variable {{ item }} is defined as a network"
  changed_when: false
  loop: "{{ virtual_machine.networks }}"

- name: Verify that required pools are defined
  ansible.builtin.assert:
    that: "{{ virtual_machine.pool in libvirt_pools }}"
    fail_msg: "{{ virtual_machine.pool }} needs to be set as a pool"
    success_msg: "Required variable {{ virtual_machine.pool  }} is defined as a pool"
  changed_when: false
  diff: false
